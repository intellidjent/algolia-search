<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>SSO integration · Knowledgebase</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="
    &lt;div class=&quot;admonition admonition-important&quot;&gt;
      &lt;div class=&quot;admonition-heading&quot;&gt;
        &lt;h5&gt;&lt;div class=&quot;admonition-icon&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;14&quot; height=&quot;16&quot; viewBox=&quot;0 0 14 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z&quot;/&gt;&lt;/svg&gt;&lt;/div&gt; important&lt;/h5&gt;
      &lt;/div&gt;
      &lt;div class=&quot;admonition-content&quot;&gt;
    &lt;/div&gt;&lt;/div&gt;"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="SSO integration · Knowledgebase"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docusaurus.workfusion.com//"/><meta property="og:description" content="
    &lt;div class=&quot;admonition admonition-important&quot;&gt;
      &lt;div class=&quot;admonition-heading&quot;&gt;
        &lt;h5&gt;&lt;div class=&quot;admonition-icon&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;14&quot; height=&quot;16&quot; viewBox=&quot;0 0 14 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z&quot;/&gt;&lt;/svg&gt;&lt;/div&gt; important&lt;/h5&gt;
      &lt;/div&gt;
      &lt;div class=&quot;admonition-content&quot;&gt;
    &lt;/div&gt;&lt;/div&gt;"/><meta property="og:image" content="https://docusaurus.workfusion.com/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://docusaurus.workfusion.com/img/docusaurus.png"/><link rel="shortcut icon" href="/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.4.4/fuse.min.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/WorkFusion_H_5_RGB.png" alt="Knowledgebase"/><h2 class="headerTitleWithLogo">Knowledgebase</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/terra" target="_self">WorkFusion 10.0</a></li><li class=""><a href="/docs/spa" target="_self">SPA</a></li><li class="siteNavGroupActive"><a href="/docs/spa/admin/install-spa/prepare/overview" target="_self">Administrator&#x27;s Guide</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Information security</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">System requirements<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/spa/admin/system-requirements/system-requirements">System requirements</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/system-requirements/infrastructure-capacity-planning">Infrastructure capacity planning</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/system-requirements/application-ports">Applications&#x27; ports</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/system-requirements/dns-names-configuration">DNS names configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/system-requirements/env-readiness-checklist">Environment readiness checklist</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Installation<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/spa/admin/install-spa/overview-install">Overview</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Prepare for installation</h4><ul><li class="navListItem"><a class="navItem" href="/docs/spa/admin/install-spa/prepare/overview">Prerequisites</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/install-spa/prepare/create-users">Create users</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/install-spa/prepare/prepare-tls-certificates">Prepare TLS certificates</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/install-spa/prepare/prepare-servers">Prepare servers</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/spa/admin/install-spa/install-spa">Install SPA</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/install-spa/post-install">Post-installation tasks</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/install-spa/uninstall-win">Uninstall WF components from Windows servers</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Maintenance<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/spa/admin/maintenance/restart-servers">Restart servers</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/maintenance/backup-and-restore-data">Backup and restore data</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/maintenance/update-tls-certificates">Update TLS certificates</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/maintenance/update-passwords">Update passwords</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Logs management</h4><ul><li class="navListItem"><a class="navItem" href="/docs/spa/admin/maintenance/aggregate-and-view-logs">Aggregate and view logs</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/maintenance/filebeat-configuration">Filebeat configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/maintenance/search-a-specific-message-in-logs">Search a specific message in logs</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/maintenance/archive-logs">Archive logs</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/maintenance/change-a-component-s-log-level">Change a component&#x27;s log level</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/maintenance/reference-log-configuration-of-components">Reference: log configuration of components</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/maintenance/reference-log-rotation">Reference: log rotation</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Service information</h4><ul><li class="navListItem"><a class="navItem" href="/docs/spa/admin/maintenance/general-services-information">General services Information</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/maintenance/inorder-and-deps-checker">Inorder and deps_checker</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/maintenance/common-services">Common services</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/maintenance/app">APP</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/maintenance/int">INT</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/maintenance/ocr">OCR</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/maintenance/bep">BEP</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Monitoring<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/spa/admin/monitoring/monitoring-overview">Monitoring overview</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/monitoring/сhange-elk-admin-password">Сhange ELK admin password in Kibana</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/monitoring/investigate-performance-hot-spot">Investigate performance hot spot in environment</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/monitoring/heartbeat-configuration-guide">Heartbeat configuration guide</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/monitoring/metricbeat-configuration-guide">Metricbeat configuration guide</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/monitoring/connect-external-elk">Integrate external ELK</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">License management<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/spa/admin/licenses/manage-workfusion-analytics-license">Manage WorkFusion Analytics license</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/licenses/activate-the-ocr-license">Activate OCR license</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/licenses/update-the-elk-license">Update ELK license</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/licenses/workfusion-libraries-and-tools">WorkFusion libraries and tools</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">OCR<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/spa/admin/ocr/scale-ocr">Scale OCR</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/ocr/install-second-ocr-server-in-same-spa-instance">Install second OCR server</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/ocr/migration-notes">OCR Migration Notes</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/ocr/advanced-configuration">Advanced Configuration</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Information security<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem navListItemActive"><a class="navItem" href="/docs/spa/admin/info-sec/sso-integration">SSO integration</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/info-sec/ldap-and-ad-integration">LDAP and AD integration</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/info-sec/import-root-or-intermediate-ca-to-store">Import Root or Intermediate CA to Store</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/info-sec/manage-secure-properties">Manage secure properties</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Analytics<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/spa/admin/analytics/backup-restore-custom-dashboards">Backup and restore custom Analytics dashboards</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/analytics/using-tableau">Setup end-to-end SSI audit chart</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Advanced configuration<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/spa/admin/advanced/config-yml-options">config.yml options</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/advanced/hosts-yml-options">hosts.yml options</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/advanced/secret-vault-properties">Secrets vault properties</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/advanced/health-сheck-messages">Health сheck messages</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/advanced/configuration-and-health-check">Configuration and health check</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/advanced/crontab-jobs">Crontab jobs</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/advanced/notifications-via-email">Notifications via email</a></li><li class="navListItem"><a class="navItem" href="/docs/spa/admin/advanced/prepare-rpa-ocrwin-and-bi-configurations">Prepare RPA, OCRWIN and BI configurations</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://git.workfusion.com/projects/DOC/repos/documentation/browse/docs/spa/admin/info-sec/sso-integration.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">SSO integration</h1></header><article><div><span>
    <div class="admonition admonition-important">
      <div class="admonition-heading">
        <h5><div class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></div> important</h5>
      </div>
      <div class="admonition-content">
    <p>Before starting the SSO integration, request the IdP metadata (file or URL) from the security team.</p>
</div></div><h2><a class="anchor" aria-hidden="true" id="saml-20"></a><a href="#saml-20" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SAML 2.0</h2>
<p><strong>Security Assertion Markup Language</strong> (SAML) is an XML-based,
open-standard data format for exchanging authentication and
authorization data between parties, in particular, between an identity
provider (IdP) and a service provider (SP).</p>
<p>The SAML specification defines three roles:</p>
<ul>
<li>the <strong>principal</strong> (typically a user)</li>
<li>the <strong>identity provider</strong> (IdP)</li>
<li>the <strong>service provider</strong> (SP)</li>
</ul>
<p>In the use case addressed by SAML, the <strong>principal</strong> requests a service
from the service provider. The service provider requests and obtains an
identity assertion from the identity provider. On the basis of this
assertion, the service provider can make an access control decision,
that means it can decide, whether or not to perform some service for the
connected principal.</p>
<p>Before delivering the identity assertion to the SP, the IdP can request
some information from the principal – such as a user name and password –
in order to authenticate the principal. SAML specifies the assertions
between the three parties: in particular, the messages that assert
identity that are passed from the IdP to the SP. In SAML, one identity
provider may provide SAML assertions to many service providers.
Similarly, one SP may rely on and trust assertions from many independent
IdPs.</p>
<p>SAML does not specify the method of authentication at the identity
provider; it may use a username and password, or other form of
authentication, including multi-factor authentication. A directory
service such as LDAP, RADIUS, or Active Directory that allows users to
log in with a user name and password is a typical source of
authentication tokens at an identity
provider.<sup> <a href="https://en.wikipedia.org/wiki/Security_Assertion_Markup_Language#cite_note-3">[3]</a> </sup> The
popular Internet social networking services also provide identity
services that in theory could be used to support SAML exchanges.</p>
<h2><a class="anchor" aria-hidden="true" id="use-case"></a><a href="#use-case" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use case</h2>
<p>SAML Web Browser SSO (Service Provider initiated authentication):</p>
<p><img src="/docs/assets/spa/admin-guide/saml2.png" alt=""></p>
<ol>
<li><p>Request the target resource at the SP.</p>
<p>The principal (via an HTTP user agent) requests a target resource at the service provider:</p>
<p><a href="https://sp.example.com/myresource">https://sp.example.com/myresource</a></p>
<p>The service provider performs a security check on behalf of the target
resource. If a valid security context at the service provider already
exists, skip steps 2–7.</p></li>
<li><p>Redirect to the SSO Service at the IdP.</p>
<p>The service provider determines the user's preferred identity provider
(by unspecified means) and redirects the user agent to the SSO Service
at the identity provider:</p>
<p><a href="https://idp.example.org/SAML2/SSO/Redirect?SAMLRequest=request">https://idp.example.org/SAML2/SSO/Redirect?SAMLRequest=request</a></p>
<p>The value of the <code>SAMLRequest</code> parameter is the Base64 encoding of a
deflated <code>&lt;samlp:AuthnRequest&gt;</code> element.</p></li>
<li><p>Request the SSO Service at the IdP.</p>
<p>The user agent issues a GET request to the SSO service at the identity
provider where the value of the <code>SAMLRequest</code> parameter is taken from
the URL query string at <strong>step 2</strong>. The SSO service processes
the <code>AuthnRequest</code> and performs a security check. If the user does not
have a valid security context, the identity provider
identifies the user (details omitted).</p></li>
<li><p>Respond with an XHTML form.</p>
<p>The SSO service validates the request and responds with a document
containing an XHTML form:</p>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"https://sp.example.com/SAML2/SSO/POST"</span> <span class="hljs-attr">...</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"SAMLResponse"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"response"</span> /&gt;</span>
    ...
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Submit"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre>
<p>The value of the <code>SAMLResponse</code> parameter is the base64 encoding of
a <code>&lt;samlp:Response&gt;</code> element.</p></li>
<li><p>Request the Assertion Consumer Service at the SP.</p>
<p>The user agent issues a POST request to the assertion consumer service
at the service provider. The value of the <code>SAMLResponse</code> parameter is
taken from the XHTML form at <strong>step 4</strong>.</p></li>
<li><p>Redirect to the target resource.</p>
<p>The assertion consumer service processes the response, creates a
security context at the service provider and redirects the user agent to
the target resource.</p></li>
<li><p>Request the target resource at the SP again</p>
<p>The user agent requests the target resource at the service provider
(again):</p>
<p><a href="https://sp.example.com/myresource">https://sp.example.com/myresource</a></p></li>
<li><p>Respond with requested resource.</p>
<p>Since a security context exists, the service provider returns the
resource to the user agent.</p></li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="control-tower-saml-integration"></a><a href="#control-tower-saml-integration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Control Tower SAML Integration</h2>
<h3><a class="anchor" aria-hidden="true" id="security-profiles"></a><a href="#security-profiles" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Security profiles</h3>
<p>The following security profiles for SAML are supported:</p>
<ul>
<li><strong>PKIX</strong>. The <strong>java.security.cert</strong> package is utilized for assertion
and validation of the certificates. It implements RFC 5280.</li>
<li><strong>MetaIOP</strong>. Trusted certificates are not mandatory. Other
mechanisms are used for validation (e.g. explicitly supplying the keys
to trust).</li>
</ul>
<p>The desired profile is specified in the SAML metadata file.</p>
<p><strong>Related documentation:</strong></p>
<p><a href="https://docs.oracle.com/javase/8/docs/api/java/security/cert/package-summary.html">Package
java.security.cert</a></p>
<p><a href="http://docs.spring.io/spring-security-saml/docs/1.0.x/reference/html/security.html#configuration-security-profiles">Configuring SAML Extension. Security
profiles</a></p>
<h3><a class="anchor" aria-hidden="true" id="application-properties"></a><a href="#application-properties" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Application Properties</h3>
<p><strong>&lt;TOMCAT_HOME&gt;/conf/workfusion.properties</strong></p>
<table>
<thead>
<tr><th>Property Name</th><th>Value</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>wf.sso.saml.enable</code></td><td>true</td><td>Enables or disables SSO (SAML 2.0 protocol) authentification for Control Tower. Accepted values: true/false</td></tr>
<tr><td><code>wf.sso.saml.entity.base.url</code></td><td><a href="https://HOSTNAME/workfusion">https://HOSTNAME/workfusion</a></td><td>Base URL of Control Tower (Service Provider). Used in SP metadata. (see Service Provider metadata example)</td></tr>
<tr><td><code>wf.sso.saml.response.skew</code></td><td>60</td><td>Maximum difference between local time and time of the assertion creation which still allows message to be processed.<p>Basically determines maximum difference between clocks of the IDP and SP machines. Defaults to 60 (seconds)</p></td></tr>
</tbody>
</table>
<p><strong>workfusion.properties sample</strong></p>
<pre><code class="hljs css language-c#"><span class="hljs-meta"># option to enable/disable SSO authentication</span>
wf.sso.saml.enable=<span class="hljs-literal">true</span>

<span class="hljs-meta"># base url used during generation SP metadata</span>
wf.sso.saml.entity.<span class="hljs-keyword">base</span>.url=https:<span class="hljs-comment">//HOSTNAME/workfusion</span>

<span class="hljs-meta"># response skew in seconds</span>
wf.sso.saml.response.skew=<span class="hljs-number">60</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="secure-properties"></a><a href="#secure-properties" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Secure Properties</h3>
<p>These properties are placed to Secure Storage.</p>
<table>
<thead>
<tr><th>Property Name</th><th>Value</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>wf.sso.saml.idp.file.metadata</code></td><td>/path/to/local/meta</td><td>Local path to a file with IdP metadata parameters.</td></tr>
<tr><td><code>wf.sso.saml.idp.metadata</code></td><td><a href="https://SAML_SERVICE_URL/idp/sso">https://SAML_SERVICE_URL/idp/sso</a></td><td>URL that points to a file with IdP metadata parameters. Must be provided by a customer.<p>This parameter is an alternative to <code>wf.sso.saml.idp.file.metadata</code>, which is a recommended option.</p></td></tr>
<tr><td><code>wf.sso.saml.sp.metadata</code></td><td>workfusion-metadata-id</td><td>A unique string. ID of Service Provider.</td></tr>
<tr><td><code>wf.sso.saml.username.attribute</code></td><td>uid</td><td>Name of attribute that will be used for authentication.<ul><li><strong>uid</strong> for LDAP</li><li><strong>sAMAcountName</strong> for Active Directory</li></ul> <p>Must be provided by customer.</td></tr>
</tbody>
</table>
<p><strong>Secure Storage sample properties</strong></p>
<pre><code class="hljs css language-c#"><span class="hljs-meta"># url to IdP metadata, use url or file</span>
<span class="hljs-meta">#wf.sso.saml.idp.metadata=none</span>

<span class="hljs-meta"># path to IdP metadata file</span>
wf.sso.saml.idp.file.metadata=/path/to/local/metadata

<span class="hljs-meta"># some unique name</span>
wf.sso.saml.sp.metadata=wf-sp-hostname

<span class="hljs-meta"># the name of an attribute taken from IdP response that contains username</span>
wf.sso.saml.username.attribute=uid
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="service-provider-metadata-example"></a><a href="#service-provider-metadata-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Service Provider metadata example</h3>
<p>For example Control Tower is installed and available by URL
<a href="https://example-host-name/workfusion">https://example-host-name/workfusion</a></p>
<p>Metadata for this Service Provider can be generated and downloaded by
URL <a href="https://example-host-name/workfusion/saml/metadata">https://example-host-name/workfusion/saml/metadata</a></p>
<p><details>
<summary><font color="#FD4810">SP metadata example</font></summary></p>
<p><img src="/docs/assets/spa/admin-guide/sp-meta.png" alt="Meta">
</details></p>
<p><code>&lt;EntityDescriptor/&gt;</code> has attributes with Service Provider <strong>ID</strong> and <strong>entityID</strong>. These attributes are configured through property <code>wf.sso.saml.sp.metadata</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="identity-provider-metadata-example"></a><a href="#identity-provider-metadata-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Identity Provider metadata example</h3>
<p>Usually IdP metadata is provided by a security team. It can be a file or
URL.</p>
<p>The file should be placed on the application server (SP) and be
accessible for Service Provider (Control Tower). It is configured via
the property <code>wf.sso.saml.idp.file.metadata</code>.</p>
<p>If URL provided, it can be configured via <code>wf.sso.saml.idp.metadata</code>.</p>
<p>Both properties <code>wf.sso.saml.idp.file.metadat</code>a and
<code>wf.sso.saml.idp.metadata</code> cannot be configured at the same time.</p>
<p><details>
<summary><font color="#FD4810">Show IdP metada example
</font></summary></p>
<p><img src="/docs/assets/spa/admin-guide/ldp-meta.png" alt="">
</details></p>
<p><code>&lt;IDPSSODescriptor/&gt;</code>** must contain information about login/logout
endpoints: <code>SingleSignOnService</code>, <code>SingleLogoutService</code>, and
attributes' description – <code>saml:Attribute</code>.</p>
<p><code>&lt;saml:Attribute/&gt;</code> is the username attribute name and must be mapped
via <code>wf.sso.saml.username.attribute</code>/<code>ws.sso.saml.username.attribute</code> in
Secure Storage. (for example, <code>wf.sso.saml.username.attribute=ACCOUNT</code>).
The value of this mapped attribute in <code>IdP response</code> will be used for
authorization.</p>
<h3><a class="anchor" aria-hidden="true" id="identity-provider-authentication-response"></a><a href="#identity-provider-authentication-response" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Identity Provider Authentication Response</h3>
<p>After a user logs in on the IdP side, the server sends a response to SP
(CT/WS) and this response must include username attributes configured (if not encrypted)
in <code>wf.sso.saml.username.attribute</code> or <code>ws.sso.saml.username.attribute</code>.</p>
<p><details>
<summary><font color="#FD4810">How to decrypt SAML Response</p>
<p></font></summary></p>
<p>To catch <code>SamlResponse</code> from IdP, use a debuger (press F12 to open it) in your browser
and then try to login . Then select the <strong>SSO</strong> name among all names of the
<strong>Network</strong> tab and there will be present decoded SamlResponse. Copy this
value and decode it using <a href="https://www.samltool.com/decode.php">https://www.samltool.com/decode.php</a> tool.</p>
<p><img src="/docs/assets/spa/admin-guide/decrypt.png" alt="">
</details></p>
<ul>
<li>Example of the IdP response with <strong>not encrypted</strong> data:</li>
</ul>
<p><img src="/docs/assets/spa/admin-guide/ldp-response.png" alt=""></p>
<p>The <strong>Destination</strong> attribute in Response must contain an URL that leads
to the <code>&lt;AssertionConsumerService/&gt;</code> tag into SP metadata.</p>
<p>The <code>&lt;saml:Audience/&gt;</code> tag from <code>&lt;saml:AudienceRestriction/&gt;</code> must
contain a value of <code>wf.sso.saml.sp.metadata/ws.sso.saml.sp.metatdata</code> from vault
(depends on component you are configuring SSO for).</p>
<p><code>&lt;saml:AtributeValue&gt;</code> is &quot;someusername&quot; and will be used for authentication on the SP side (if configuration is <code>wf.sso.saml.username.attribute=uid</code>).</p>
<p><strong>Example</strong></p>
<pre><code class="hljs css language-xml">wf.sso.saml.sp.metadata = test.workfsuin.com_workspace-sandbox
--------------------------------------------------------------
In this case, Audience will look like:

<span class="hljs-tag">&lt;<span class="hljs-name">saml:AudienceRestriction</span> <span class="hljs-attr">xmlns:saml</span>=<span class="hljs-string">"urn:oasis:names:tc:SAML:2.0:assertion"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">saml:Audience</span>&gt;</span>test.workfusion.com_workspace-sandbox<span class="hljs-tag">&lt;/<span class="hljs-name">saml:Audience</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">saml:AudienceRestriction</span>&gt;</span>
</code></pre>
<p>Example of the IdP response with the <strong>encrypted</strong> data:</p>
<p><img src="/docs/assets/spa/admin-guide/response-encr.png" alt=""></p>
<h3><a class="anchor" aria-hidden="true" id="idp-and-sp-metadata-description"></a><a href="#idp-and-sp-metadata-description" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IdP and SP metadata description</h3>
<table>
<thead>
<tr><th>Tag</th><th>Source</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><strong>EntityDescriptor</strong></td><td>IdP/SP metadata</td><td>main metadata's tag with ID/EntityID attributes</td></tr>
<tr><td><strong>IDPSSODescriptor</strong></td><td>IdP metadata</td><td>IdP configuration description</td></tr>
<tr><td><strong>SPSSODescriptor</strong></td><td>SP metadata</td><td>SP configuration description</td></tr>
<tr><td><strong>SingleSignOnService</strong></td><td>IdP metadata</td><td>Endpoint to sign on</td></tr>
<tr><td><strong>SingleLogoutService</strong></td><td>IdP/SP metadata</td><td>Endpoint to sign out</td></tr>
<tr><td><strong>AssertionConsumerService</strong></td><td>SP metadata</td><td>SP endpoint to assert response from IdP side</td></tr>
<tr><td><strong>saml:Atribute</strong></td><td>IdP metadata/response</td><td>Attribute description goes from IdP side</td></tr>
<tr><td><strong>saml:AtributeValue</strong></td><td>IdP response</td><td>Attribute value</td></tr>
<tr><td><strong>saml:AudienceRestriction</strong></td><td>IdP response</td><td>Container for saml:Audience tag</td></tr>
<tr><td><strong>saml:Audience</strong></td><td>IdP response</td><td>SP EntityID for which the response is sent (used in response Assertion)</td></tr>
<tr><td><strong>samlp:StatusCode</strong></td><td>IdP response</td><td>Response status, success example value (urn:oasis:names:tc:SAML:2.0:status:Success)</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="configure-sso"></a><a href="#configure-sso" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configure SSO</h3>
<ol>
<li><p>Before enabling SSO, in Control Tower, create a user with the Administrator role and a name that is suitable for your SSO account.</p>
<p><img src="/docs/assets/spa/admin-guide/create-user-ct.png" alt="Create user"></p></li>
<li><p>Configure application and secure properties to enable SSO:</p>
<pre><code class="hljs css language-bash"><span class="hljs-comment"># workfusion.properties file</span>
wf.sso.saml.enable=<span class="hljs-literal">true</span>
wf.sso.saml.entity.base.url=https://control-tower-host/workfusion
<span class="hljs-comment"># Secure Storage</span>
wf.sso.saml.idp.file.metadata=/path/to/ipd/metadata/provided/by/security/team
wf.sso.saml.sp.metadata=unique-service-provider-name
wf.sso.saml.username.attribute=ACCOUNT //the name of the attribute into SSO response with username, usually described <span class="hljs-keyword">in</span> IdP metadata file.
</code></pre></li>
<li><p>Restart the Application server.</p></li>
<li><p>Go to <a href="https://control-tower-host/workfusion/saml/metadata">https://control-tower-host/workfusion/saml/metadata</a>. The metadata file will be downloaded. Send it to security team to be added to Identity Provider (SSO server).</p></li>
<li><p>Open any CT page. From now you'll be redirected to your Identity Provider Login Page. Enter your account.</p></li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="user-authentication-and-authorization"></a><a href="#user-authentication-and-authorization" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>User authentication and authorization</h3>
<ul>
<li><p>This implementation assumes that the <strong>user</strong>, who is going to log in via the identity provider (IdP)** already exists in <strong>Control Tower</strong></p></li>
<li><p>The Admin user who is responsible for creation new users and assigning privileges must be primarily created directly via database.</p></li>
<li><p>The Admin user must create new users with usernames that already exists in IdP.</p></li>
<li><p>If a deleted, disabled, or non-existing user tries to log in, they will be redirected to the WorkFusion login failed screen with a validation message.</p>
<p><img src="/docs/assets/spa/admin-guide/logins-fail.png" alt="Login fail"></p></li>
<li><p>Users are authorized on the WorkFusion side. The admin user can manage user roles.</p></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="idp-configuration"></a><a href="#idp-configuration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IdP configuration</h3>
<p>Assertion Consumer Service, EntityID and Public Key can be found in the
metadata XML file.</p>
<p>Service Provider metadata can be downloaded by the url: <a href="https://%3Cinstance%3E/workfusion/saml/metadata">https://&lt;instance&gt;/workfusion/saml/metadata</a>, for example, <a href="https://SOMESITE.WORKFUSION_HOSTNAME/workfusion/saml/metadata">https://SOMESITE.WORKFUSION_HOSTNAME/workfusion/saml/metadata</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="ldap-ad-authorization"></a><a href="#ldap-ad-authorization" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>LDAP / AD authorization</h3>
<p>Click here to expand LDAP authrization use case diagram</p>
<p><img src="https://jira.workfusion.com/secure/attachment/71573/sso_ldap_integration.png" alt="sso_ldap_integration.png"></p>
<p>For information on enabling LDAP and AD auhotization, and mappping user groups, see <a href="/docs/spa/admin/info-sec/ldap-and-ad-integration">LDAP and AD integration</a></p>
<h2><a class="anchor" aria-hidden="true" id="workspace-saml-integration"></a><a href="#workspace-saml-integration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WorkSpace SAML Integration</h2>
<h3><a class="anchor" aria-hidden="true" id="application-properties-1"></a><a href="#application-properties-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Application Properties</h3>
<table>
<thead>
<tr><th>Property Name</th><th>Value</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>ws.sso.saml.enable</code></td><td>true</td><td>Enables or disables SAML 2.0 protocol for Control Tower. Accepted values: <code>true</code> and <code>false</code></td></tr>
<tr><td><code>ws.sso.saml.entity.base.url</code></td><td><a href="https://HOSTNAME/workspace">https://HOSTNAME/workspace</a><br>or<br><a href="https://HOSTNAME/workspace-sandbox">https://HOSTNAME/workspace-sandbox</a></td><td>Base url of Workfusion SAML provider</td></tr>
<tr><td><code>ws.sso.saml.response.skew</code></td><td>60</td><td>Maximum difference between the local time and the time of the assertion creation, which still allows a message to be processed.<p>Basically determines maximum difference between clocks of the IDP and SP machines. By default, 60 (seconds)</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="sample-of-workspaceproperties-workspace-sandboxproperties"></a><a href="#sample-of-workspaceproperties-workspace-sandboxproperties" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sample of workspace.properties (workspace-sandbox.properties)</h4>
<pre><code class="hljs css language-c#"><span class="hljs-meta"># option to enable/disable SSO authentication</span>
ws.sso.saml.enable=<span class="hljs-literal">true</span>

<span class="hljs-meta"># base url used during generation SP metadata</span>
ws.sso.saml.entity.<span class="hljs-keyword">base</span>.url=https:<span class="hljs-comment">//WORKSPACE_HOSTNAME/workfusion</span>

<span class="hljs-meta"># response skew in seconds</span>
ws.sso.saml.response.skew=<span class="hljs-number">60</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="secure-properties-1"></a><a href="#secure-properties-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Secure Properties</h3>
<table>
<thead>
<tr><th>Property Name</th><th>Value</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>ws.sso.saml.idp.file.metadata</code></td><td>/path/to/local/meta</td><td>Path to file with IdP metadata parameters.</td></tr>
<tr><td><code>ws.sso.saml.idp.metadata</code></td><td>none</td><td>URL that points to a file with IdP metadata parameters. Must be provided by a customer.<br><br>This parameter is an alternative to <code>wf.sso.saml.idp.file.metadata</code>, which is a recommended option.</td></tr>
<tr><td><code>ws.sso.saml.sp.metadata</code></td><td>ws-sp-hostname</td><td>A unique string. ID of Service Provider, for example, https://<instance>/workspace/saml/metadata</td></tr>
<tr><td><code>ws.sso.saml.username.attribute</code></td><td>mail</td><td>A name of the attribute that will be used for authentication</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="secure-storage-sample-properties"></a><a href="#secure-storage-sample-properties" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Secure Storage sample properties</h4>
<pre><code class="hljs css language-c#"><span class="hljs-meta"># url to IdP metadata, use url or file</span>
<span class="hljs-meta">#ws.sso.saml.idp.metadata=none</span>

<span class="hljs-meta"># path to IdP metadata file</span>
ws.sso.saml.idp.file.metadata=/path/to/local/metadata

<span class="hljs-meta"># some unique name</span>
ws.sso.saml.sp.metadata=ws-sp-hostname

<span class="hljs-meta"># the name of an attribute taken from IdP response that contains user's email address</span>
ws.sso.saml.username.attribute=mail
</code></pre>

    <div class="admonition admonition-note">
      <div class="admonition-heading">
        <h5><div class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></div> note</h5>
      </div>
      <div class="admonition-content">
    <p>At least one of the &quot;idp&quot; properties must be set. Otherwise, you'll get the &quot;No IdP was configured&quot; page.</p>
</div></div><h3><a class="anchor" aria-hidden="true" id="user-authentication-and-authorization-1"></a><a href="#user-authentication-and-authorization-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>User Authentication and Authorization</h3>
<ul>
<li>This implementation assumes that the <strong>user</strong> that is going to log in via the identity provider (IdP)** already exists in WorkSpace.</li>
<li>A requester must be primarily created directly via the database.The user's email in IdP must be the same as the username in WorkSpace.</li>
<li>A Worker can get registered by himself. The email in IdP must be the same as the username in WorkSpace.</li>
<li>If a deleted, disabled, or non-existing user tries to log in to Workspace, they will be redirected to the the index page with a validation message.</li>
<li>A disabled (non-active) user can be activated by email or by a Requester.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="idp-configuration-1"></a><a href="#idp-configuration-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IdP Configuration</h3>
<p>Assertion Consumer Service, EntityID and Public Key can be found in
metadata xml file</p>
<p>Service Provider metadata can be downloaded by the url: <a href="https://&lt;instance&gt;/workspace/saml/metadata">https://&lt;instance&gt;/workspace/saml/metadata</a>.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 7/8/2019</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/spa/admin/ocr/advanced-configuration"><span class="arrow-prev">← </span><span>Advanced Configuration</span></a><a class="docs-next button" href="/docs/spa/admin/info-sec/ldap-and-ad-integration"><span>LDAP and AD integration</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#saml-20">SAML 2.0</a></li><li><a href="#use-case">Use case</a></li><li><a href="#control-tower-saml-integration">Control Tower SAML Integration</a><ul class="toc-headings"><li><a href="#security-profiles">Security profiles</a></li><li><a href="#application-properties">Application Properties</a></li><li><a href="#secure-properties">Secure Properties</a></li><li><a href="#service-provider-metadata-example">Service Provider metadata example</a></li><li><a href="#identity-provider-metadata-example">Identity Provider metadata example</a></li><li><a href="#identity-provider-authentication-response">Identity Provider Authentication Response</a></li><li><a href="#idp-and-sp-metadata-description">IdP and SP metadata description</a></li><li><a href="#configure-sso">Configure SSO</a></li><li><a href="#user-authentication-and-authorization">User authentication and authorization</a></li><li><a href="#idp-configuration">IdP configuration</a></li><li><a href="#ldap-ad-authorization">LDAP / AD authorization</a></li></ul></li><li><a href="#workspace-saml-integration">WorkSpace SAML Integration</a><ul class="toc-headings"><li><a href="#application-properties-1">Application Properties</a></li><li><a href="#secure-properties-1">Secure Properties</a></li><li><a href="#user-authentication-and-authorization-1">User Authentication and Authorization</a></li><li><a href="#idp-configuration-1">IdP Configuration</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/wf-logo.svg" alt="Knowledgebase" width="66" height="58"/></a><div><h5>Docs</h5><a href="https://www.workfusion.com/reports-whitepapers/">Reports &amp; Whitepapers</a></div><div><h5>Community</h5><a href="https://forum.workfusion.com/" target="_blank" rel="noreferrer noopener">Forum</a><a href="http://automationacademy.com/">Automation Academy</a><a href="https://partners.workfusion.com/">Partners Portal</a></div><div><h5>More</h5><a href="https://www.workfusion.com/iac/">Intelligent Automation Cloud</a></div></section><section class="copyright">Copyright © 2019 WorkFusion, Inc.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                appId: 'PNQGK7RZR5',
                apiKey: 'ba828b974aad37836106a37d2432da4b',
                indexName: 'search-config',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:en","version:undefined"]}
              });
            </script></body></html>